version: v2
namespace: ${PORTER_NAMESPACE}

build:
  method: docker
  context: .
  dockerfile: ./docker/Dockerfile

services:
- name: translation
  type: web
  run: bun run start
  port: 80
  cpuCores: 1.0
  ramMegabytes: 1024
  env:
    NODE_ENV: ${NODE_ENV}
    PORTER_APP_NAME: ${PORTER_APP_NAME}
    HOST: "0.0.0.0"

- name: webview
  type: web
  run: bun run start:webview
  port: 5173
  cpuCores: 1.0
  ramMegabytes: 1024
  env:
    NODE_ENV: production
    HOST: "0.0.0.0"
    VITE_API_URL: "https://translation-api.mentra.glass"
